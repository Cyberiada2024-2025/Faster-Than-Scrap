[gd_scene load_steps=9 format=3 uid="uid://bibsnsnvaa402"]

[ext_resource type="Script" uid="uid://chekqae75l00d" path="res://code/evironment/asteroid.gd" id="1_lvs01"]
[ext_resource type="PackedScene" uid="uid://cdmdodg800234" path="res://art/models/big-asteroids/cube000.glb" id="1_rgurs"]
[ext_resource type="PackedScene" uid="uid://hs3ujnysju5o" path="res://prefabs/collision_damage_calculator.tscn" id="2_lvs01"]
[ext_resource type="PackedScene" uid="uid://b2rns0sxx87ar" path="res://prefabs/vfx/particles/timed_particles/collision_asteroid.tscn" id="3_u7c7x"]
[ext_resource type="PackedScene" uid="uid://0txf83d46q4j" path="res://prefabs/modules/functional_components/damage_controller.tscn" id="4_h8d04"]
[ext_resource type="PackedScene" uid="uid://c5h05bkp7b8go" path="res://prefabs/ui/poi/asteroid_poi.tscn" id="5_w6lyr"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_u7c7x"]
bounce = 1.0

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_srnob"]
points = PackedVector3Array(-0.190818, 0.335731, 3.36073, -0.0110934, 0.348487, 3.34172, -0.140369, 1.21874, 3.33222, -0.262437, 1.02645, 3.34302, -0.376397, 0.444395, 3.34691, -0.232933, -0.586967, 3.26138, -5.75781e-05, -0.570431, 3.28946, -5.75781e-05, -0.328063, 3.30587, 0.106921, 0.348487, 3.3063, 0.0603008, 0.741094, 3.31667, 0.0389051, 1.21355, 3.30414, 0.130119, -0.381923, 3.27564, 0.0607513, 1.42237, 3.2346, -0.145549, 1.58064, 3.20436, -0.283157, 1.2126, 3.32574, -0.415135, 0.9485, 3.32488, -0.523465, 0.765189, 3.29119, -0.524816, 0.493057, 3.29119, -0.429549, -0.525075, 3.18147, -0.371443, -1.01406, 3.05966, -0.164017, -0.927131, 3.1737, 0.00129366, -0.81894, 3.22337, 0.158496, -0.804294, 3.18709, 0.262547, 0.353684, 3.23071, 0.263673, 0.714164, 3.23028, 0.265024, 1.17669, 3.20436, 0.299933, 1.35859, 3.13828, 0.290699, -0.765553, 3.13309, 0.387768, -0.724922, 3.06873, 0.279889, 1.56221, 3.06052, 0.0697601, 1.63025, 3.13784, -0.280229, 1.55465, 3.19875, -5.75781e-05, 1.79372, 3.04497, -0.146675, 1.85419, 3.00869, -0.409054, 1.22158, 3.2778, -0.515582, 0.965508, 3.25749, -0.61085, 0.752433, 3.19443, -0.629092, 0.556838, 3.20652, -0.667154, 0.212893, 3.14778, -0.550491, -0.509012, 3.08601, -0.571662, -0.782089, 2.99141, -0.609724, -1.14068, 2.80654, -0.393739, -1.20966, 2.94865, -0.165818, -1.24934, 3.01387, -5.75781e-05, -1.25785, 3.02856, 0.163451, -1.24367, 3.00567, 0.35376, -1.21013, 2.94303, 0.394074, 0.410378, 3.12618, 0.427857, 1.09543, 3.08255, 0.466144, 1.30756, 3.01128, 0.433488, -0.959731, 2.98321, 0.548349, -0.922407, 2.89552, 0.426055, 1.67796, 2.85319, 0.277411, 1.76631, 2.93396, 0.143632, 1.85088, 2.95729, -0.307706, 1.77623, 3.02554, -0.424144, 1.57119, 3.11452, 0.00174415, 2.06679, 2.81259, -0.152756, 2.13294, 2.73613, -0.523465, 1.34441, 3.13871, -0.703865, 0.56109, 3.09335, -0.646434, 1.60426, 2.87047, -0.783367, 0.215728, 3.01517, -0.666929, -0.71878, 2.89725, -0.828636, -1.03532, 2.53182, -0.838545, -1.19879, 2.40655, -0.630669, -1.31218, 2.64801, -0.76062, -0.763663, 2.74261, -0.386757, -1.401, 2.79703, -0.16199, -1.44258, 2.85621, -5.75781e-05, -1.45108, 2.86831, 0.226287, -1.43124, 2.83159, 0.453532, -1.18226, 2.89466, 0.513891, -1.35517, 2.70244, 0.523575, 0.982989, 2.99012, 0.643616, -0.878941, 2.7884, 0.568393, 1.36142, 2.84844, 0.616815, 1.12945, 2.84801, 0.645193, -1.12273, 2.75427, 0.55961, 1.51639, 2.74866, 0.503305, 1.69497, 2.71108, 0.271105, 2.01057, 2.69466, 0.142956, 2.09797, 2.7154, -0.350497, 2.0512, 2.7262, -0.436756, 1.7271, 2.99444, -0.592157, 1.61702, 2.94476, -0.00321066, 2.33562, 2.46573, -0.292841, 2.24727, 2.51368, -0.145774, 2.38192, 2.39143, -0.74508, 1.63592, 2.6735, -0.68855, 1.67041, 2.73397, -0.837645, 1.6208, 2.4653, -1.03403, -0.074357, 2.36206, -0.946425, -0.84209, 2.36638, -0.932236, -1.13548, 2.20872, -0.400045, -1.84888, 1.27959, -0.526393, -1.44966, 2.46357, -0.33293, -1.53707, 2.58711, -0.0392456, -1.59659, 2.65967, 0.162775, -1.59848, 2.63333, 0.37921, -1.55313, 2.59445, 0.587087, -1.46667, 2.49078, 0.671318, -1.27675, 2.58495, 0.728749, -0.836893, 2.67177, 0.764108, -1.04761, 2.60784, 0.651499, 1.20221, 2.74693, 0.863204, -0.778782, 2.4532, 1.03527, -0.702245, 2.10289, 0.784378, -1.20918, 2.47826, 1.08099, 0.949445, 1.28737, 0.91568, 1.37985, 1.44373, 0.466595, 2.0238, 2.2234, 0.387318, 2.39704, 1.81089, 0.338896, 2.2879, 2.16077, 0.275159, 2.3616, 2.21649, 0.378084, 1.90899, 2.64369, 0.149487, 2.43247, 2.24155, -0.429324, 2.15798, 2.5046, -0.524141, 2.03797, 2.5478, -0.00726461, 2.5142, 2.15948, -0.312886, 2.49483, 2.07611, -0.164467, 2.55058, 2.07093, -0.649362, 1.94632, 2.44715, -0.849581, 1.71718, 2.31757, -0.910841, 1.68033, 2.13658, -0.984036, 1.46725, 2.0057, -1.08741, 0.24502, 2.099, -1.07007, -0.0233321, 2.19187, -1.11219, -0.828862, 1.64243, -1.06039, -0.864295, 1.89728, -1.00678, -0.72067, 2.21001, -1.05475, -1.05469, 1.74092, -0.523915, -1.68731, 1.0485, -0.328426, -1.92448, 1.06146, -0.26559, -1.96133, 1.26404, -0.0694249, -2.04495, 1.04548, 0.226512, -2.06432, 1.05843, 0.344526, -2.02983, 1.04893, 0.481684, -1.60368, 2.31109, 0.662535, -1.55785, 2.17459, 0.774018, -1.50116, 2.12622, 0.744739, -1.39061, 2.3504, 0.966354, -1.12792, 2.16509, 1.0445, -0.875634, 2.08864, 1.11387, 0.765661, 1.26016, 1.10914, -0.864295, 1.83292, 0.885951, -1.33816, 2.15559, 1.04856, 1.25134, 0.909844, 1.00284, 1.21591, 1.27268, 0.861402, 1.64348, 1.14612, 0.555556, 1.94726, 1.96207, 0.288672, 2.52413, 1.84372, 0.525602, 2.17309, 1.54351, 0.440244, 2.28884, 1.5906, 0.167054, 2.61011, 1.86532, -0.470764, 2.35026, 2.10289, -5.75781e-05, 2.64507, 1.87353, -0.487655, 2.44901, 1.81478, -0.17235, 2.62712, 1.86834, -0.327976, 2.56759, 1.85106, -0.695532, 2.01577, 2.22297, -0.643506, 2.25294, 1.77245, -0.800033, 1.99545, 1.69383, -0.919399, 1.72804, 1.7988, -1.03471, 1.34158, 0.778099, -1.06692, 1.14362, 0.666224, -1.10453, 0.643296, 1.6515, -1.11646, 0.304076, 1.92363, -1.10092, 0.0659611, 2.00527, -1.1275, -0.316252, 1.45237, -0.999577, 1.0189, 0.223907, -0.909039, 0.841726, -0.0348314, -0.332029, -1.71613, -0.545397, -0.318291, -1.81959, -0.433954, -0.258158, -1.89896, -0.297889, -0.00951684, -2.12621, -0.421859, -0.0128951, -2.12999, -0.215819, 0.10557, -2.18149, -0.224026, 0.122912, -2.08889, 0.799265, 0.318401, -2.17251, -0.208044, 0.328311, -2.06432, 0.870536, 0.797891, -1.67124, 1.55086, 0.898789, -1.56494, 1.74048, 0.878969, -1.45108, 2.01391, 1.06297, -1.06367, 1.89037, 1.00667, -1.3273, 1.82601, 1.1641, 0.0607641, 0.971181, 1.14518, 0.393842, 0.693005, 1.10081, 0.903617, 0.765141, 1.17333, -0.82272, 1.496, 1.15283, -1.03957, 1.40572, 0.962075, -1.4525, 1.79577, 1.00532, 1.31654, 0.774643, 1.10036, 0.854482, 0.522816, 1.05216, 1.14032, 0.668384, 0.820187, 1.68174, 0.988891, 0.233043, 2.49767, 1.63768, 0.351283, 2.38239, 1.61522, 0.767937, 1.62174, 0.661472, -5.75781e-05, 2.60208, 1.65021, 0.138001, 2.56523, 1.65582, -0.153882, 2.59027, 1.64675, -0.39464, 2.48113, 1.61911, -0.529546, 2.36444, 1.59189, -0.687874, 2.16459, 1.53315, -0.860166, 1.84143, 1.22474, -0.903859, 1.68647, 0.981548, -0.980433, 1.43276, 0.642035, -1.03967, 1.18614, 0.477894, -1.02322, 0.982044, 0.362563, -1.07097, 0.87149, 0.742679, -0.937867, 1.0926, 0.0083636, -0.814672, 0.938579, -0.271972, -0.300499, -1.59282, -0.694852, -0.249374, -1.62352, -0.785129, -0.187665, -1.87156, -0.708674, -0.248023, -1.8914, -0.473261, -0.109964, -2.00007, -0.60587, -5.75781e-05, -2.09267, -0.627467, 0.124263, -2.17771, -0.439569, 0.330563, -2.14558, -0.423155, 0.48281, -2.0955, -0.162257, 1.00554, -1.41612, 1.55043, 0.582807, -1.99393, -0.112583, 1.09563, -1.23233, 1.45756, 1.13257, 0.496837, 0.477894, 1.16229, -0.764608, 1.25756, 0.696543, -1.80306, -0.25167, 0.747442, -1.65754, -0.22057, 0.707578, -1.56778, -0.488379, 0.947436, 1.35528, 0.628212, 1.0177, 1.15921, 0.490852, 0.997885, 0.593689, -0.0179853, 1.03707, 0.555893, 0.107712, 0.66794, 1.73513, 0.717194, 0.154217, 1.38693, -0.503498, 0.930995, 1.19654, 0.378113, 0.502179, 1.23528, -0.293138, 0.391147, 1.29811, -0.382551, -5.75781e-05, 1.41575, -0.541941, -0.164017, 1.41575, -0.543237, -0.558374, 1.62694, 0.0373043, -0.738549, 1.56221, 0.137517, -0.832915, 1.5041, 0.225203, -0.941695, 1.53906, 0.731017, -0.901156, 1.44788, 0.337942, -0.888319, 1.29953, 0.0714283, -0.812871, 1.19087, -0.190766, -0.632921, 1.03307, -0.492267, -0.175052, -1.35375, -0.963957, -0.246897, -1.36557, -0.874111, -0.123928, -1.58337, -0.941495, -0.109739, -1.93629, -0.757916, 0.141154, -2.13188, -0.651657, -5.75781e-05, -1.98873, -0.804135, 0.281465, -2.10401, -0.630491, 0.405561, -2.04164, -0.587728, 0.516593, -2.05157, -0.359658, 0.610059, -1.9429, -0.299617, 1.11027, 0.208641, 0.402734, 0.98302, 0.341873, -0.099624, 0.543394, -1.94763, -0.490539, 0.550376, -1.7851, -0.642586, 0.528079, -1.62116, -0.776058, 0.654202, -1.45769, -0.621852, 0.916581, 0.390063, -0.266789, 0.784378, 0.693849, -0.413652, 0.783927, 0.444867, -0.517752, 0.307365, 1.12378, -0.646473, 0.163901, 1.16536, -0.713425, 0.777171, 0.904562, -0.202428, 0.653301, 1.16441, -0.128997, 0.610059, 0.778418, -0.623148, -5.75781e-05, 1.17717, -0.731999, -0.210637, 1.15543, -0.7212, -0.297121, 1.38741, -0.522935, -0.469413, 1.35623, -0.46203, -0.743503, 1.44174, -0.0460621, -0.629318, 1.29764, -0.381256, -0.589454, 1.06094, -0.529415, -0.109289, -1.33958, -1.00629, -0.197349, -0.885083, -0.928969, -0.0743797, -0.657834, -1.0132, 0.00399625, -1.6188, -0.995489, 0.140253, -2.00243, -0.816661, 0.27651, -1.97267, -0.791176, 0.37966, -1.864, -0.789881, 0.451956, -1.53234, -0.893117, 0.556682, -1.41659, -0.783833, 0.733028, 0.217145, -0.609325, 0.865231, 0.149585, -0.347563, 0.562538, 0.258249, -0.818389, 0.648796, 0.51479, -0.671526, 0.423353, 0.853065, -0.751005, 0.138001, 0.906924, -0.839987, -0.0173994, 0.90031, -0.852513, -0.156584, 0.882829, -0.83178, -0.464683, 1.10724, -0.614077, -0.295769, 0.850703, -0.768715, -0.00478721, -1.13879, -1.05207, 0.0330495, -0.583187, -1.03955, 0.0269686, 0.0961978, -0.98901, 0.118632, -1.63061, -1.0011, 0.317951, -1.60557, -0.970868, 0.38484, -1.36509, -0.953158, 0.422902, 0.283289, -0.92033, 0.302636, 0.320612, -0.967844, 0.134848, 0.296045, -0.983394, 0.0889035, -0.96729, -1.04603, 0.128542, -1.35328, -1.0322, 0.119308, 0.000762701, -1.00888, 0.246782, 0.00784969, -1.00154)

[node name="Cube000" type="RigidBody3D"]
mass = 400000.0
physics_material_override = SubResource("PhysicsMaterial_u7c7x")
gravity_scale = 0.0
script = ExtResource("1_lvs01")
hp = 1000.0

[node name="cube000" parent="." instance=ExtResource("1_rgurs")]

[node name="CollisionDamageCalculator" parent="." node_paths=PackedStringArray("damageable", "shape") instance=ExtResource("2_lvs01")]
collision_particles = ExtResource("3_u7c7x")
damageable = NodePath("../DamageController/Damageable")
shape = NodePath("../DamageController/Damageable/CollisionShape3D")

[node name="DamageController" parent="." instance=ExtResource("4_h8d04")]

[node name="Damageable" parent="DamageController" index="0"]
collision_layer = 6
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="DamageController/Damageable" index="0"]
shape = SubResource("ConvexPolygonShape3D_srnob")

[node name="Asteroid Poi" parent="." instance=ExtResource("5_w6lyr")]
transform = Transform3D(4.8418, 0, 0, 0, -2.11641e-07, 4.8418, 0, -4.8418, -2.11641e-07, -0.957941, 0, 1.1085)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("ConvexPolygonShape3D_srnob")

[editable path="cube000"]
[editable path="DamageController"]
