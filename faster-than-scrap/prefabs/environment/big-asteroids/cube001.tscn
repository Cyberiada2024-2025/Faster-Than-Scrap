[gd_scene load_steps=9 format=3 uid="uid://i53nfkwrbj0d"]

[ext_resource type="Script" uid="uid://chekqae75l00d" path="res://code/evironment/asteroid.gd" id="1_3bbg8"]
[ext_resource type="PackedScene" uid="uid://hs3ujnysju5o" path="res://prefabs/collision_damage_calculator.tscn" id="2_gca08"]
[ext_resource type="PackedScene" uid="uid://b2rns0sxx87ar" path="res://prefabs/vfx/particles/timed_particles/collision_asteroid.tscn" id="3_sgfmx"]
[ext_resource type="PackedScene" uid="uid://0txf83d46q4j" path="res://prefabs/modules/functional_components/damage_controller.tscn" id="4_qx42a"]
[ext_resource type="PackedScene" uid="uid://c5h05bkp7b8go" path="res://prefabs/ui/poi/asteroid_poi.tscn" id="5_twdne"]
[ext_resource type="PackedScene" uid="uid://dcxsu88n7ds1b" path="res://art/models/big-asteroids/cube001.glb" id="6_0cdqe"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_3bbg8"]
bounce = 1.0

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_3bbg8"]
points = PackedVector3Array(1.54755, 1.92177, -6.92987, 2.60006, 2.87572, -6.79105, 3.59106, 2.79083, -6.68218, 3.56099, -0.836313, -6.70395, 2.02597, -0.409194, -6.86454, 0.702808, -1.30924, -6.89585, -1.97905, -0.446921, -6.86318, -2.87026, 2.03495, -6.82916, -2.50804, 3.11151, -6.73253, 2.93495, 3.28666, -6.65496, -2.36724, 3.92263, -6.58555, -0.747471, 4.83885, -6.35828, 2.0533, 4.5788, -6.38822, 4.47271, 2.87302, -6.34058, 4.29228, 2.2667, -6.49709, 4.18293, 0.0421777, -6.55289, 4.99897, 3.62216, -5.98402, 3.51862, -1.9991, -6.66585, 1.98769, -2.821, -6.79105, 2.06424, -2.17561, -6.80602, 0.861368, -3.24138, -6.75023, -2.93724, -2.4882, -6.73662, -2.72537, 0.407317, -6.84005, -3.30084, 0.908542, -6.7965, -3.52227, 1.85305, -6.7475, -3.18192, 3.74208, -6.51342, -2.77731, 4.2177, -6.45354, -1.90113, 4.9399, -6.32425, 0.455399, 5.52062, -6.01532, 1.53798, 5.43843, -5.98946, 5.10012, 4.96685, -5.20556, 5.27371, 3.09938, -5.95408, 4.76523, 1.92581, -6.35011, 4.65314, 1.00825, -6.40999, 3.87948, -2.40331, -6.53792, 5.46508, 4.1153, -5.48864, 5.64688, 3.48338, -5.67781, 3.87264, -3.05275, -6.47259, 2.16129, -3.86118, -6.6781, 0.000222206, -3.52568, -6.70259, -2.39595, -4.5416, -6.34058, -3.86947, -4.42034, -6.26165, -4.10047, -4.02421, -6.3052, -4.67457, -1.94386, -6.49981, -3.92551, -1.91556, -6.6291, -1.58811, -3.39094, -6.63182, -4.95205, -0.865955, -6.35691, -4.81809, 2.38662, -6.14597, -4.98485, 2.69651, -6.03982, -3.25299, 4.21366, -6.33786, -2.32487, 5.2727, -6.1378, 1.18122, 6.05418, -5.45189, 0.127344, 5.92348, -5.65876, 4.71329, 5.94504, -4.0896, 5.62091, 5.5543, -3.44724, 4.29228, 6.11347, -4.08007, 5.29695, 2.18316, -5.99899, 5.08918, 1.29255, -6.16366, 5.64961, -2.75094, -5.67509, 5.24364, -2.87759, -5.90508, 5.83824, 3.575, -5.34438, 5.87515, 3.05492, -5.41243, 5.91479, 2.13466, -5.44101, 5.84644, -2.13249, -5.52266, 4.32645, -4.43516, -5.90508, 3.41337, -3.91373, -6.40999, 2.4415, -4.64131, -6.34058, 1.72525, -4.25327, -6.58011, 1.00079, -4.21689, -6.5733, -2.40005, -5.04822, -6.14189, -3.44163, -5.00645, -6.1242, -4.65133, -4.21823, -6.11331, -4.8919, -3.205, -6.24532, -5.26507, -3.364, -6.02485, -5.69017, -2.58521, -5.80029, -5.57262, -0.828229, -5.9255, -6.04147, 2.77197, -5.21917, -5.65737, 3.97383, -5.2287, -5.38125, 4.1436, -5.36888, -2.85933, 5.38184, -5.91869, -4.6527, 5.02344, -5.41243, -2.77458, 5.76719, -5.59751, -0.191144, 6.05418, -5.44237, -2.36861, 6.45839, -4.5319, -2.13214, 6.65781, -4.02563, 0.891439, 6.28458, -4.86533, 4.84588, 6.18892, -2.3721, 5.59904, 5.66883, -2.93961, 4.45358, 6.38294, -2.47825, 5.98313, 5.02074, -1.92163, 6.7814, 2.85011, -2.93144, 6.26198, 3.32574, -4.29646, 3.91228, 6.46648, -2.99949, 5.58947, -5.09133, -4.56592, 5.204, -3.62134, -5.68325, 6.21004, -2.5623, -5.09125, 5.97493, -3.1026, -5.16201, 4.91285, -3.79111, -5.81118, 6.34126, 1.81668, -4.65847, 6.57363, 1.15915, -4.27196, 4.04487, -4.9539, -5.79485, 4.62444, -4.26135, -5.79213, 5.25458, -5.04418, -4.85036, 2.01366, -4.95929, -6.19905, -2.42465, -5.44165, -5.93639, -3.53458, -5.27188, -5.94183, -4.53104, -4.71272, -5.89692, -5.10787, -4.57664, -5.62065, -5.85967, -2.84121, -5.59751, -5.97722, -2.2322, -5.48183, -6.13578, -0.832271, -5.28178, -6.62103, 2.51462, -3.748, -6.19319, 4.22579, -3.30026, -5.70111, 5.21476, -3.46493, -4.97529, 4.96954, -5.19876, -5.06003, 4.77821, -5.26817, -3.09307, 6.43549, -4.16853, -2.77595, 6.09999, -5.03409, -2.55998, 6.66589, -3.98481, -1.94487, 6.71979, -3.40777, 3.11538, 6.55945, -2.80487, 5.17666, 6.10942, -0.816549, 4.10092, 6.69688, -0.375606, 5.49105, 5.9922, 0.75397, 6.05421, 5.30908, 1.63858, 6.13076, 4.89005, -0.45454, 6.65428, 3.57366, 2.27686, 6.90579, 2.15217, -0.115667, 6.95773, 0.342643, -0.496729, 6.81831, 1.24808, -3.39824, 6.52989, 2.60759, -3.80108, 3.49948, 6.6888, -1.25069, 4.81034, -6.13016, -3.47445, 4.95796, -5.55349, -4.68433, 6.27702, -3.23869, -4.65575, 5.86831, -4.67634, -4.3019, 5.9804, -4.73563, -3.93445, 6.06651, -5.1614, -1.9053, 6.55176, -2.6418, -4.20119, 6.7937, 1.00555, -3.5112, 4.35379, -5.44839, -5.09533, 3.69085, -5.60603, -5.19195, 0.627628, -5.83913, -5.5526, 0.165617, -5.66801, -5.76083, -2.74314, -5.73538, -5.46686, -3.7027, -5.53866, -5.61657, -0.400279, -6.31745, -4.93746, -4.42443, -5.33117, -5.45734, -5.51521, -4.97142, -4.6503, -5.846, -4.71137, -4.34409, -5.8501, -4.54699, -4.47066, -4.87687, -5.22068, -5.14977, -6.22053, -2.74016, -5.03409, -6.77139, 2.68304, -3.01854, -5.94442, 5.37106, -2.5286, -5.55758, 5.6594, -2.92872, -4.42306, 6.24147, -3.13286, -3.27623, 6.52037, -3.55611, -3.87493, 6.63086, -0.793413, -2.83472, 6.84644, 0.216401, 0.846332, 6.82758, -0.881874, 0.879138, 6.74673, -2.01962, 4.88551, 6.30884, 0.0136213, 4.44674, 6.51633, 0.315749, 3.75782, 6.76964, -0.00543165, 3.37373, 6.75886, 1.98425, 5.47055, 5.8925, 1.35142, 5.89565, 5.43034, 2.00875, 4.21573, 6.38564, 2.73549, 6.3727, 4.30528, 2.41703, 5.67695, 5.07194, 4.33051, 6.75953, 0.372285, 2.53135, 6.39457, 3.59252, 3.82152, 6.53126, 0.849257, 4.06649, 6.84565, -1.62588, 2.40342, 7.01378, -1.34023, -0.387855, 6.90852, -1.66765, -1.63991, 2.17222, 6.84509, 0.0299525, 4.68048, -5.83778, -4.43528, 4.85818, -6.29724, -1.92979, 1.99453, -6.6516, -2.58576, 4.37703, -6.10187, -3.87457, 6.48889, -3.17132, -4.02699, 6.18954, -4.86767, -2.20879, 6.20184, -5.19913, 0.485866, 5.56896, -5.83239, -0.0299287, 6.82788, -2.6674, -1.87808, 3.95466, -5.99947, -4.45705, 0.404824, -6.20157, -5.10486, -4.18659, -6.30667, -4.15492, -4.4832, -6.00486, -4.5632, -2.73904, -6.84832, -2.98588, 0.56065, -6.39021, -4.43528, -4.53241, -5.71248, -4.88983, -5.17622, -5.57639, -4.3332, -6.15492, -5.0334, -2.82529, -6.4119, -4.2371, -2.75452, -4.86593, -5.91863, -4.29646, -6.56909, -3.17671, -2.88653, -6.67844, -2.8466, -2.52588, -6.87527, -2.12441, -1.71341, -6.80009, 2.53618, -2.27547, -6.77549, 2.91614, -2.12849, -6.12075, 4.91026, -2.38571, -6.28751, 5.02613, 2.24147, -5.91571, 5.45325, -0.560693, -5.33751, 5.97469, -2.09311, -4.89464, 6.24012, -2.02914, -3.61659, 6.75078, 2.35715, -4.79622, 6.32231, -1.31057, -3.15868, 6.81275, 1.62905, -2.54494, 6.84509, 2.49052, 2.38136, 6.87473, 1.99923, 2.94725, 6.09999, 5.12257, 3.95466, 6.1458, 4.02021, 1.65827, 6.65646, 3.61874, 5.18623, 5.941, 1.99378, 5.36666, 5.36702, 4.3237, 5.01264, 5.44247, 4.78642, 5.23544, 5.08811, 4.9892, 5.35846, 4.81729, 5.17837, 5.64824, 4.63404, 4.97423, 6.13759, 3.8081, 4.65169, 6.41917, 0.717214, 4.59317, 6.69939, -2.78597, 3.4704, 6.84428, -2.13114, 2.44833, 6.92356, -2.20794, 1.03296, 6.86205, -2.9234, 0.0449228, 5.45688, -5.93075, 0.815212, 4.97026, -6.25816, 0.808407, 4.68185, -6.37404, 1.89035, 3.62934, -6.73783, 0.881898, 3.25071, -6.80385, 1.24799, 1.11288, -6.83619, -0.0462599, 0.764318, -6.64217, -3.18866, 3.83027, -6.1113, -4.13179, 6.69119, -4.09293, -0.0748396, 6.29752, -3.55532, 4.43258, 5.64278, -5.01588, 4.5292, 5.67011, -5.75424, 1.83591, -4.77162, -6.28781, -2.01417, -3.9009, -6.58019, -1.89577, -1.66193, -6.89009, 0.129301, -2.72811, -6.85236, -0.397381, -4.24946, -6.61252, -0.0244851, -5.89384, -5.41201, -2.53133, -5.95262, -5.55483, 0.423263, -6.31621, -4.89192, 0.402849, -6.74815, -3.64156, 0.364742, -6.85614, -2.62698, -1.57731, -5.61363, -5.80006, -1.52832, -5.53298, -5.67744, -2.77902, -6.86434, -3.14707, 0.91456, -6.90808, -1.78083, 2.19384, -6.95045, 0.366896, 1.51745, -6.90945, 1.95141, 2.58579, -6.87664, 2.34754, 2.09177, -6.83427, 2.65744, 3.07028, -6.76045, 3.12633, 2.82259, -6.66614, 3.63159, 2.87158, -6.33398, 4.67851, 2.67833, -5.78722, 5.6338, 2.85798, -4.90557, 6.23338, 2.71644, -2.61602, 6.65511, 3.82968, -4.24126, 6.52172, 2.40342, -4.63219, 6.34252, 2.85934, 1.14568, 6.8424, 2.81034, 2.36085, 6.10808, 5.31582, 2.72718, 5.57182, 5.84387, 5.04954, 5.07059, 5.24778, -2.20732, 6.64972, 3.8882, 0.814893, 6.38968, 4.56323, 5.60314, 4.21366, 5.32943, 5.99407, 1.21574, 5.26547, 6.1991, 1.05002, 5.00417, 6.13349, -1.90748, 5.2505, 6.40004, -2.62024, 4.57956, 6.22781, -3.50682, 4.73198, 5.42271, -5.95905, 2.01283, 4.77753, -5.83239, 4.49654, 3.86581, -5.93884, 5.07358, 2.88574, -6.15711, 5.11849, 2.72855, -6.28107, 4.64488, 0.0521646, -6.85371, 3.1288, 5.76716, -4.46211, 5.02186, 5.3817, -5.05496, 5.14299, 5.28328, -5.56426, 4.24749, -5.02449, -6.33901, 0.498114, -5.41133, -6.11804, 0.0558105, -1.96128, -6.84158, 2.68786, -2.25653, -6.84562, 2.24692, -4.23853, -6.55055, 1.83727, -5.85283, -5.12232, 2.04141, -6.58549, -3.50951, 3.31797, -5.52341, -5.96309, 0.805686, -6.73038, -3.62, 1.34598, -6.67297, -3.077, 3.38466, -6.80283, -1.64339, 3.03898, -6.65657, -2.7725, 3.79294, -6.6347, 2.13196, 4.2298, -6.61693, 2.81913, 3.85146, -6.39413, 2.73963, 4.46796, -5.15572, 4.28777, 5.32263, -5.57399, 5.66479, 3.2091, -5.07644, 5.91001, 3.41596, -3.0712, 6.40315, 4.22027, -2.77321, 6.34791, 4.54281, 2.34308, 5.57451, 5.94458, -1.93531, 6.3533, 4.58228, -2.39458, 6.19296, 4.88441, -0.407114, 5.98951, 5.34985, 4.0025, 4.51009, 6.097, 5.33522, 3.49147, 5.69416, 5.54163, 3.4726, 5.52133, 5.65781, 1.10391, 5.55943, 5.52932, -1.6636, 5.75132, 5.44731, -2.85603, 5.84931, 5.47875, -3.45427, 5.75813, 5.92572, -3.3128, 5.3131, 5.0099, -5.49016, 5.02731, 4.43991, -5.59256, 5.34849, 2.58503, -5.97252, 5.50227, 0.145113, -6.45758, 4.61494, -3.18328, -6.5748, 3.43773, 4.78163, -4.27078, 6.00854, 4.69415, -4.94717, 5.72546, -4.38615, -6.38078, 2.23331, -5.2555, -5.31365, 3.64868, -5.73255, -3.44214, 5.29677, -6.32851, -2.79271, 4.86263, -5.00126, -5.51172, 3.64868, -6.4283, -1.96811, 4.70885, -6.39139, 0.926058, 4.65169, -6.32851, 2.36236, 4.61494, -4.99716, 4.64752, 5.17701, -4.30277, 0.170178, 6.55291, -4.0909, 4.14629, 6.19363, -4.12508, 4.54781, 5.92961, -3.39242, 5.84399, 4.85174, -3.4676, 5.30369, 5.47505, 2.80783, 5.0167, 6.10517, 3.24797, 4.53569, 6.23718, -0.377042, 5.67287, 5.62203, -1.56761, 4.77956, 6.25351, 1.44503, 5.13392, 6.12966, -0.382509, 3.9105, 6.63729, 2.35812, 1.46905, 6.8877, 2.79826, 0.869468, 6.86729, 3.61567, -1.75657, 6.71214, 4.10638, -1.7943, 6.50936, 4.58616, -3.83693, 6.20043, 4.12279, -5.16948, 5.85884, 2.46747, -5.67475, 5.70913, 1.38352, -5.60064, 5.85475, 1.2482, -5.93884, 5.4805, -0.40848, -6.04663, 5.27091, -1.08236, -6.23122, 4.82725, -1.92984, -5.70574, 5.47097, -4.02939, -5.88494, 4.06649, 4.29912, -4.2344, 6.27664, -5.11471, -5.16409, 4.07193, -5.19262, -4.86093, 4.43802, -5.89794, -2.93957, 5.46144, -5.2268, -4.56451, 4.72518, -5.42226, -3.44214, 5.68872, -6.19729, 0.2618, 4.94565, -5.8747, 0.368243, 5.21648, -4.29457, 4.92777, 5.35665, -4.59392, -0.521027, 6.37871, -4.96572, -2.00449, 6.17321, -4.4627, -1.66495, 6.47942, -3.82026, -0.223256, 6.66179, -3.18055, 0.815573, 6.75297, -3.81069, 3.78115, 6.30114, -1.62502, 3.90511, 6.63729, -1.93394, 3.98326, 6.56924, -3.76421, 4.77282, 5.84931, -1.20265, 3.50764, 6.70398, 2.4497, 0.79132, 6.89995, -0.762507, 0.8533, 6.97344, 3.07711, -2.04626, 6.82782, 3.88358, -3.97166, 6.43043, 3.81523, -4.76527, 6.15552, 2.00683, -4.59954, 6.34469, -2.40278, -4.58607, 6.38552, -3.78882, -4.47154, 6.12694, -4.18249, -4.59954, 5.70505, -5.01219, -4.55912, 4.94701, -4.85637, -2.7725, 6.23037, -4.23989, -3.76147, 6.31747, -4.14011, -3.30202, 6.45765, -2.59415, -2.0503, 6.81149, -1.97905, -1.60971, 6.9122, -0.713298, -1.67842, 6.94486, 2.38683, -3.69276, 6.60055, -1.36941, -3.16728, 6.83599, 1.31518, -4.10371, 6.5325, -2.38912, -4.24922, 6.50528, -3.75191, -4.17647, 6.35149, -3.29127, -3.57419, 6.57741, -1.18078, -2.50437, 6.88362)

[node name="Cube001" type="RigidBody3D"]
mass = 400000.0
physics_material_override = SubResource("PhysicsMaterial_3bbg8")
gravity_scale = 0.0
script = ExtResource("1_3bbg8")
hp = 1000.0

[node name="CollisionDamageCalculator" parent="." node_paths=PackedStringArray("damageable", "shape") instance=ExtResource("2_gca08")]
collision_particles = ExtResource("3_sgfmx")
damageable = NodePath("../DamageController/Damageable")
shape = NodePath("../DamageController/Damageable/CollisionShape3D")

[node name="DamageController" parent="." instance=ExtResource("4_qx42a")]

[node name="Damageable" parent="DamageController" index="0"]
collision_layer = 6
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="DamageController/Damageable" index="0"]
transform = Transform3D(2.91159, 0, 0, 0, 2.91159, 0, 0, 0, 2.91159, 0.0510909, 0, -0.145532)
shape = SubResource("ConvexPolygonShape3D_3bbg8")

[node name="Asteroid Poi" parent="." instance=ExtResource("5_twdne")]
transform = Transform3D(47.2807, 0, 0, 0, -2.0667e-06, 47.2807, 0, -47.2807, -2.0667e-06, -0.260181, 0, 0.741124)

[node name="cube001" parent="." instance=ExtResource("6_0cdqe")]

[node name="Cube_001_low_poly" parent="cube001" index="0"]
transform = Transform3D(2.91159, 0, 0, 0, 2.91159, 0, 0, 0, 2.91159, 0.0510909, 0, -0.145532)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(2.91159, 0, 0, 0, 2.91159, 0, 0, 0, 2.91159, 0.0510909, 0, -0.145532)
shape = SubResource("ConvexPolygonShape3D_3bbg8")

[editable path="DamageController"]
[editable path="cube001"]
