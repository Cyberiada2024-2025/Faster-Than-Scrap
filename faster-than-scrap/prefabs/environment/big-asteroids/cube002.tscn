[gd_scene load_steps=9 format=3 uid="uid://b6nohfwmtxepc"]

[ext_resource type="Script" uid="uid://chekqae75l00d" path="res://code/evironment/asteroid.gd" id="1_kapen"]
[ext_resource type="PackedScene" uid="uid://hs3ujnysju5o" path="res://prefabs/collision_damage_calculator.tscn" id="2_0q0q8"]
[ext_resource type="PackedScene" uid="uid://b2rns0sxx87ar" path="res://prefabs/vfx/particles/timed_particles/collision_asteroid.tscn" id="3_hrjec"]
[ext_resource type="PackedScene" uid="uid://0txf83d46q4j" path="res://prefabs/modules/functional_components/damage_controller.tscn" id="4_fpjn1"]
[ext_resource type="PackedScene" uid="uid://c5h05bkp7b8go" path="res://prefabs/ui/poi/asteroid_poi.tscn" id="5_5wgch"]
[ext_resource type="PackedScene" uid="uid://falla64ko4eb" path="res://art/models/big-asteroids/cube002.glb" id="6_vgbrq"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_kapen"]
bounce = 1.0

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_6fan2"]
points = PackedVector3Array(2.64721, 0.00862932, -2.47582, 2.63486, -0.262265, -2.6177, 2.48316, -0.289688, -4.11623, 2.47236, -0.000264645, -4.11726, 2.57984, 0.323994, -2.56074, 2.61327, 0.34104, -2.1351, 2.61892, 0.335852, -1.45263, 2.63486, -0.235583, -2.18378, 2.57418, -0.643963, -2.35155, 2.57058, -0.345275, -3.23699, 2.51247, -0.64841, -3.1179, 2.38339, -0.583558, -4.29435, 2.41168, -0.293764, -4.39999, 2.39934, -0.000264645, -4.39584, 2.31757, 0.342152, -4.36271, 2.37825, 0.288418, -4.09759, 2.54076, 0.649363, -1.92073, 2.54384, 0.655663, -1.49302, 2.61789, -0.0187936, -1.60798, 2.32991, 0.907658, 3.19727, 2.38802, 0.540413, 3.1807, 2.37362, 0.293606, 3.50795, 2.47236, -0.309699, 0.959309, 2.42659, -0.992679, -2.26145, 2.40705, -0.610611, 0.959309, 2.23323, -0.861123, -4.32128, 2.37774, -0.974521, -2.81757, 2.21266, -0.665086, -4.62471, 2.28414, -0.283018, -4.65682, 2.2826, -0.000264645, -4.65682, 2.2394, 0.275077, -4.63196, 2.06919, 0.648993, -4.52944, 2.08821, 0.789813, -4.07895, 2.38494, 0.938787, -1.92073, 2.16484, 1.17411, 3.20245, 2.11958, 1.12556, 3.81139, 2.29391, 0.888388, 3.51209, 2.30729, 0.310282, 3.8031, 2.24557, -0.269677, 4.06718, 2.3582, -0.000264645, 3.50588, 2.15301, -0.769961, 4.09514, 2.22706, -1.29767, -2.27077, 2.04039, -1.04975, 4.062, 2.06404, -1.04938, -4.34614, 1.98125, -0.944133, -4.662, 2.01468, -0.76292, -4.78109, 2.08924, -0.319705, -4.86291, 2.10261, -0.000264645, -4.88051, 2.09798, 0.316582, -4.82666, 1.87994, 0.882829, -4.53358, 1.92108, 0.707544, -4.69928, 1.92365, 0.943234, -4.19183, 2.18901, 1.19523, -1.92073, 2.17615, 1.18485, 1.27931, 1.91388, 1.3342, 3.81657, 1.94525, 1.38941, -0.000704288, 1.93137, 1.37162, 1.59932, 2.27334, 0.561536, 3.79689, 1.75858, 1.08998, 4.1811, 1.88611, 0.883941, 4.23806, 1.91954, 0.413674, 4.55081, 2.03267, 0.244689, 4.53528, 2.11341, 0.231719, 4.33851, 2.07073, -0.748467, 4.29502, 2.0301, -1.48629, -2.22727, 1.92365, -1.36252, 1.27931, 1.70252, -1.56523, 1.59932, 1.97354, -0.862235, 4.30641, 1.83109, -1.25727, 4.08479, 1.77812, -1.20391, -4.32232, 1.57139, -1.1965, -4.56258, 1.99565, -1.45368, -2.56074, 1.75035, -1.66084, -2.24073, 1.72464, -1.60933, -2.56074, 1.45568, -1.03826, -4.8277, 1.72927, -0.775519, -4.94368, 1.85783, -0.358245, -5.01928, 1.87377, -0.0273169, -5.04207, 1.85371, 0.272483, -5.011, 1.81206, 0.520401, -4.9354, 1.75035, 0.72385, -4.86601, 1.58836, 0.940269, -4.72206, 1.1785, 1.08776, -4.85669, 1.59093, 1.02513, -4.49319, 1.43151, 1.67735, -1.92073, 1.78429, 1.51689, -1.92487, 1.66653, 1.47613, 3.82174, 1.68453, 1.52875, 1.59932, 1.23096, 0.50669, 4.95677, 1.57653, 0.468149, 4.80247, 1.89897, 0.236536, 4.69684, 1.81515, -0.21409, 4.64091, 1.65418, -0.22076, 4.73205, 1.41094, -1.5656, 4.13553, 1.41043, -1.5908, 3.83106, 1.12502, -1.70494, 3.87249, 1.31992, -0.864829, 4.62331, 0.808754, -1.26802, 4.68441, 1.12502, -1.49296, 4.42447, 1.58013, -1.28692, -4.31403, 1.44591, -1.72421, -2.56074, 1.34461, -1.30804, -4.34821, 0.564999, -1.27173, -4.63093, 0.576827, -1.1587, -4.8598, 1.45568, -1.75682, -2.24073, 1.20884, -0.839259, -5.06589, 1.35952, -0.566512, -5.11456, 1.65264, -0.416427, -5.08142, 1.15073, 0.0327171, -5.23573, 1.42071, 0.313617, -5.15391, 1.42174, 0.573394, -5.08763, 1.35129, 0.823536, -4.99546, 1.14045, 1.19004, -4.59986, 1.10394, 0.853924, -5.03896, 0.794355, 0.886905, -5.05449, 0.847837, 1.10888, -4.88051, 1.10959, 1.7385, -1.92694, 0.885892, 1.79409, 1.20371, 1.14816, 1.74072, 1.27931, 1.42586, 1.66031, -0.000704288, 1.41197, 1.60806, 3.52142, -0.851252, 1.60138, 4.13968, -0.565328, 1.45315, 4.40479, -0.282489, 1.25674, 4.62434, -0.000164509, 1.02773, 4.78693, 0.28216, 0.5834, 5.13801, 0.563456, 0.301388, 5.24053, 1.25924, 0.273965, 5.0158, 1.66498, 0.222084, 4.82939, 0.562942, -0.000264645, 5.24467, 0.560885, -0.289317, 5.16079, 0.282674, -0.595788, 5.17322, 0.856066, -1.57783, 4.46072, 1.1425, -1.65157, 4.15521, 0.860179, -1.69456, 4.16453, 0.684305, -1.7872, 3.75857, 0.574769, -1.83056, 3.2097, 0.864294, -1.80388, 1.59932, 0.269818, -1.02158, 4.99716, 0.567056, -1.36697, 4.70098, -0.000164509, -1.74273, -3.52904, 0.949659, -1.80203, -2.58249, -0.884164, -1.13202, -4.89605, -0.566356, -0.91634, -5.06692, 0.839609, -0.87187, -5.06278, 1.10805, -1.8061, -2.24591, -0.283517, -0.310441, -5.29579, 1.10753, -0.295247, -5.21812, -1.12535, -0.000264645, -5.33515, 1.04634, 0.295829, -5.23055, 0.928061, 0.605264, -5.17463, 0.82881, 1.20968, -4.59468, -1.59589, 0.997709, -4.86394, -1.38659, 0.299165, -5.2523, -1.636, 0.572653, -5.12802, -1.60977, 1.21709, -4.61954, 0.286274, 1.7763, -1.91348, 0.285245, 1.82188, -1.60073, -0.285574, 1.79965, 2.88348, -0.286603, 1.88303, -0.640713, -0.568928, 1.65549, 3.83521, -1.36242, 1.35865, 4.36958, -0.573041, 1.78779, 2.88348, -0.860508, 1.76148, 2.88348, -1.14232, 1.70626, 2.56037, -0.560699, 1.23303, 4.60777, -0.281461, 1.03069, 4.79004, 0.00446391, 0.789072, 4.97542, -1.20197, 0.860594, 4.61709, -1.44778, 0.73682, 4.58395, -1.257, 0.326958, 4.75276, -1.17369, 0.0486521, 4.78072, -1.62366, 0.144262, 4.65748, -1.52029, -0.221131, 4.65955, -1.47504, -0.551689, 4.59535, -1.63137, -0.749208, 4.49178, 0.570656, -1.5782, 4.45968, 0.554714, -1.70975, 4.15417, 0.284217, -1.38809, 4.71548, 0.0507464, -1.84353, 3.52866, 0.0939436, -1.8654, 3.17656, -0.000164509, -1.09237, 4.85839, 0.0399473, -1.34399, 4.69373, -1.6, -0.900405, 4.42033, -0.00736403, -1.83649, -2.98638, -0.759201, -1.89801, -2.85175, -1.46013, -1.76719, -3.2111, -1.73628, -1.62526, -3.53007, -0.833767, -1.24838, -4.62057, -1.56298, -1.2128, -4.31714, -1.52338, -0.939686, -4.76452, -1.56915, -0.777002, -4.91779, -1.37116, -0.579111, -5.15184, -0.84251, -0.885582, -5.0866, -0.573041, -1.90283, -2.34119, -0.48819, -0.327487, -5.28647, -1.40613, -0.000264645, -5.33515, 0.0214341, 1.22302, -4.56361, -1.68331, 1.51949, -3.51972, -1.4231, 1.64845, -2.88385, -1.82936, 0.955092, -4.84012, -1.66377, 0.296941, -5.22226, -1.90033, 0.565612, -5.05449, -1.85353, 1.15854, -4.60815, -1.87976, 1.24415, -4.36788, -0.000164509, 1.78223, -1.92073, -0.575099, 1.82781, 1.91932, -0.866679, 1.84819, -0.296889, -0.400767, 1.87969, -0.501941, -0.870793, 1.86524, 0.3193, -1.60052, 1.2649, 4.33851, -1.16135, 1.81002, 0.3193, -1.4915, 1.68328, 0.344155, -1.62109, 0.357346, 4.61502, -1.74502, 0.116098, 4.59017, -1.73062, -0.221872, 4.56945, -1.86124, -0.553541, 4.40583, -1.76508, -0.790342, 4.37269, 0.301187, -1.55189, 4.46796, -0.57047, -1.69271, 3.84142, -0.286089, -1.80833, 3.53384, -0.314887, -1.87614, 2.91144, -1.4303, -1.07421, 4.30641, -0.850738, -1.63156, 3.8321, -1.75068, -1.11275, 4.04026, -1.35625, -1.80907, -2.98948, -1.08369, -1.86317, -2.10403, -1.75736, -1.65935, -2.70883, -1.74914, -1.65528, -3.21007, -2.00009, -1.4522, -3.52593, -1.91524, -1.33547, -3.81797, -2.14305, -1.14425, -3.81694, -1.86896, -0.29117, -5.02239, -1.60206, -0.547983, -5.05657, -1.75891, -0.67398, -4.78109, -1.63857, -0.288206, -5.16634, -1.38659, -0.299323, -5.25126, -1.01118, -0.332675, -5.26058, -1.66531, -0.000264645, -5.23366, -1.95329, 1.39868, -3.52593, -1.69103, 1.53913, -3.20489, -1.16186, 1.81076, -0.000704288, -2.0402, 0.852441, -4.77384, -1.91987, 0.289159, -5.10213, -2.11991, 0.555977, -4.88465, -2.11528, 1.05404, -4.44348, -2.16877, 1.14409, -3.96607, -2.17082, 0.523366, 4.05372, -1.85867, 0.884311, 4.24945, -1.93015, 0.720515, 4.25566, -1.89776, 0.170944, 4.46693, -2.2675, 0.880235, 0.3193, -1.96152, 1.40757, -3.20489, -2.21762, 1.21153, -3.52179, -1.89621, -0.218907, 4.43897, -2.02735, -0.425691, 4.25774, -1.97849, -0.83333, 4.05061, -1.87101, -0.999721, 4.03611, -0.572013, -1.74422, 3.52866, -0.559671, -1.82537, 2.90419, -1.54292, -1.21243, 4.04647, -1.6828, -1.52483, 1.91932, -1.41436, -1.6223, 1.91932, -2.05152, -1.23096, 1.90793, -1.45961, -1.77423, -1.92694, -2.04535, -1.47666, -3.03298, -1.68897, -1.53669, 1.59932, -2.23356, -1.22503, -3.52386, -2.25927, -1.24986, -3.20696, -2.32613, -0.89744, -3.81901, -1.90341, -0.000264645, -5.08349, -2.51897, -0.321558, -4.11623, -2.47989, -0.000264645, -4.42381, -2.19191, 0.810195, -4.61436, -2.14922, 0.305094, -4.88465, -2.27162, 0.561906, -4.64957, -2.31636, 0.82613, -4.37513, -2.28087, 0.0934923, 3.8031, -2.29527, -0.280424, 3.79585, -2.04895, -0.235954, 4.27327, -2.40275, 0.608599, 0.3193, -2.47886, 0.330664, 0.314122, -2.35647, 0.919516, -3.51868, -2.11168, -0.505737, 4.04026, -2.25567, -0.55873, 3.47688, -2.23973, -0.866682, 2.88037, -1.42001, -1.63934, 1.59932, -2.25567, -1.24838, -2.88489, -2.41818, -0.950433, -3.52386, -2.42281, -0.956363, -3.20593, -2.55754, -0.315629, -3.87907, -2.60639, -0.000264645, -3.83558, -2.55806, -0.000264645, -4.13487, -2.53646, 0.311023, -4.13176, -2.38321, 0.585253, -4.39584, -2.29167, -0.575406, 3.19727, -2.54211, -0.000264645, -0.640713, -2.35493, -0.924122, -0.640713)

[node name="Cube002" type="RigidBody3D"]
mass = 400000.0
physics_material_override = SubResource("PhysicsMaterial_kapen")
gravity_scale = 0.0
script = ExtResource("1_kapen")
hp = 1000.0

[node name="CollisionDamageCalculator" parent="." node_paths=PackedStringArray("damageable", "shape") instance=ExtResource("2_0q0q8")]
collision_particles = ExtResource("3_hrjec")
damageable = NodePath("../DamageController/Damageable")
shape = NodePath("../DamageController/Damageable/CollisionShape3D")

[node name="DamageController" parent="." instance=ExtResource("4_fpjn1")]

[node name="Damageable" parent="DamageController" index="0"]
collision_layer = 6
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="DamageController/Damageable" index="0"]
transform = Transform3D(5.61385, 0, 0, 0, 5.61385, 0, 0, 0, 5.61385, -0.347709, 0, 0.0275942)
shape = SubResource("ConvexPolygonShape3D_6fan2")

[node name="Asteroid Poi" parent="." instance=ExtResource("5_5wgch")]
transform = Transform3D(27.0227, 0, 0, 0, -2.61626e-06, 27.0227, 0, -59.8532, -1.18119e-06, 1.34458, 0, -0.106705)

[node name="cube002" parent="." instance=ExtResource("6_vgbrq")]

[node name="Cube_002_low_poly" parent="cube002" index="0"]
transform = Transform3D(5.61385, 0, 0, 0, 5.61385, 0, 0, 0, 5.61385, -0.347709, 0, 0.0275942)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(5.61385, 0, 0, 0, 5.61385, 0, 0, 0, 5.61385, -0.347709, 0, 0.0275942)
shape = SubResource("ConvexPolygonShape3D_6fan2")

[editable path="DamageController"]
[editable path="cube002"]
