[gd_scene load_steps=48 format=3 uid="uid://qemwu1rt7gtj"]

[ext_resource type="Script" uid="uid://o52uw8n1ufdc" path="res://code/map_select/map_selector.gd" id="1_yxgtb"]
[ext_resource type="PackedScene" uid="uid://2oa2dvray5oq" path="res://prefabs/map_select/map_layer.tscn" id="2_bp67s"]
[ext_resource type="Script" uid="uid://smw6vyfefqxn" path="res://code/ui/connect_sound_to_all_clickables.gd" id="2_sau2r"]
[ext_resource type="PackedScene" uid="uid://ska6812npmde" path="res://prefabs/map_select/nodes/templates/map_node.tscn" id="3_s8emc"]
[ext_resource type="PackedScene" uid="uid://dko08cmdkba7m" path="res://prefabs/map_select/map_margin.tscn" id="4_nrfml"]
[ext_resource type="PackedScene" uid="uid://c6sug4hxemhdp" path="res://prefabs/map_select/nodes/templates/missions/mission_escape.tscn" id="5_rwq3m"]
[ext_resource type="Script" uid="uid://bmhwp67vae4gu" path="res://code/missions/info/mission_info.gd" id="6_0a6x0"]
[ext_resource type="PackedScene" uid="uid://ci7ns2p5tsax6" path="res://prefabs/map_select/nodes/templates/boss_node.tscn" id="6_mkmvc"]
[ext_resource type="PackedScene" uid="uid://dg6858phfq3am" path="res://prefabs/map_select/nodes/templates/missions/mission_shop.tscn" id="6_rafgn"]
[ext_resource type="PackedScene" uid="uid://bvcjycf02eb4c" path="res://prefabs/npc/bosses/juggernaut/juggernaut.tscn" id="7_yxgtb"]
[ext_resource type="PackedScene" uid="uid://dhnli7a3skvdj" path="res://prefabs/map_select/nodes/templates/missions/mission_defend.tscn" id="8_mxsq4"]
[ext_resource type="PackedScene" uid="uid://csyc0l2g1nt61" path="res://scenes/levels/finalest/easy/first_defend.tscn" id="8_uee5q"]
[ext_resource type="PackedScene" uid="uid://dqj3y62aioivm" path="res://scenes/levels/finalest/base/pre_boss_mission.tscn" id="8_xfikn"]
[ext_resource type="PackedScene" uid="uid://diru2u2s3kmy6" path="res://scenes/levels/finalest/easy/first_escape.tscn" id="10_mxsq4"]
[ext_resource type="PackedScene" uid="uid://b7ty3wbgt75vk" path="res://scenes/levels/finalest/medium/medium_escape_tradehub.tscn" id="10_uee5q"]
[ext_resource type="PackedScene" uid="uid://bxuab0bqfjkxo" path="res://scenes/levels/finalest/easy/second_defend.tscn" id="11_dlw72"]
[ext_resource type="PackedScene" uid="uid://ce6o6d7fo8n7x" path="res://scenes/levels/finalest/easy/second_escape.tscn" id="11_uee5q"]
[ext_resource type="PackedScene" uid="uid://c03u0pmq5d36y" path="res://prefabs/map_select/nodes/templates/missions/mission_fuel.tscn" id="13_rwq3m"]
[ext_resource type="PackedScene" uid="uid://du6pm1c27imvg" path="res://scenes/levels/finalest/medium/medium_fuel_tradehub.tscn" id="16_sau2r"]
[ext_resource type="PackedScene" uid="uid://bko3jm751dtjg" path="res://scenes/levels/finalest/medium/medium_defend_tradehub.tscn" id="18_f40e2"]
[ext_resource type="PackedScene" uid="uid://ba10gvvebeayk" path="res://scenes/levels/finalest/medium/defend_rocky.tscn" id="19_dlw72"]
[ext_resource type="PackedScene" uid="uid://djbsm7h83wtff" path="res://scenes/levels/finalest/medium/escape_rocky.tscn" id="20_sau2r"]
[ext_resource type="PackedScene" uid="uid://1m403ket1u35" path="res://scenes/levels/finalest/medium/fuel_rocky.tscn" id="21_f40e2"]
[ext_resource type="PackedScene" uid="uid://b3uef0qofhpqt" path="res://scenes/levels/finalest/medium/dedicated_defend.tscn" id="23_0a6x0"]
[ext_resource type="PackedScene" uid="uid://c82mvft7uxknf" path="res://scenes/levels/finalest/medium/dedicated_escape.tscn" id="24_0a6x0"]
[ext_resource type="PackedScene" uid="uid://c3rsq4emlmuky" path="res://prefabs/npc/bosses/examples/laser_star/laser_star.tscn" id="24_ui2af"]
[ext_resource type="PackedScene" uid="uid://xbe4600v6f7f" path="res://scenes/levels/finalest/medium/kill_all_sparse_rocks.tscn" id="25_ax5eh"]
[ext_resource type="PackedScene" uid="uid://1x45q2a5nnee" path="res://prefabs/npc/bosses/vortex/vortex_boss.tscn" id="25_bh1t4"]
[ext_resource type="PackedScene" uid="uid://dvdu57kxdkwq" path="res://prefabs/map_select/nodes/templates/missions/mission_kill_enemies.tscn" id="30_0a6x0"]

[sub_resource type="Resource" id="Resource_mqg28"]
script = ExtResource("6_0a6x0")
about = "Refueling stop between hyperspace jumps."
difficulty = 0

[sub_resource type="Resource" id="Resource_pki7u"]
script = ExtResource("6_0a6x0")
about = "Barren planet, yet chosen for relocation. 
Just some old scrap, insignificant remnants of ancient civilization."
difficulty = 0
metadata/_custom_type_script = "uid://bmhwp67vae4gu"

[sub_resource type="Resource" id="Resource_5jnkn"]
script = ExtResource("6_0a6x0")
about = "first escape"
difficulty = 0
metadata/_custom_type_script = "uid://bmhwp67vae4gu"

[sub_resource type="Resource" id="Resource_gobyi"]
script = ExtResource("6_0a6x0")
about = "second run"
difficulty = 0
metadata/_custom_type_script = "uid://bmhwp67vae4gu"

[sub_resource type="Resource" id="Resource_55wni"]
script = ExtResource("6_0a6x0")
about = "Field hospitals set by Seraku in war-torn cities seem to work wonders despite relying on superstitious practices."
difficulty = 0
metadata/_custom_type_script = "uid://bmhwp67vae4gu"

[sub_resource type="Resource" id="Resource_rwq3m"]
script = ExtResource("6_0a6x0")
about = "Refueling stop between hyperspace jumps"
difficulty = 0

[sub_resource type="Resource" id="Resource_3cw18"]
script = ExtResource("6_0a6x0")
about = "Abandoned trading hub and refueling station made for perfect Seraku outpost. Secret investigation, conducted behind their formal facade, revealed hidden, alien artifacts."
difficulty = 0
metadata/_custom_type_script = "uid://bmhwp67vae4gu"

[sub_resource type="Resource" id="Resource_bpxjr"]
script = ExtResource("6_0a6x0")
about = "Unstable hyperlanes made this trading hub obsolete.
"
difficulty = 0
metadata/_custom_type_script = "uid://bmhwp67vae4gu"

[sub_resource type="Resource" id="Resource_ax5eh"]
script = ExtResource("6_0a6x0")
about = "Trading hub with controlled traffic and automated defense."
difficulty = 0
metadata/_custom_type_script = "uid://bmhwp67vae4gu"

[sub_resource type="Resource" id="Resource_vsw54"]
script = ExtResource("6_0a6x0")
about = "
This is where Seraku founder started his madness and begun hunt for corrupting artifacts, one for each of his most brilliant and trusted man."
difficulty = 0

[sub_resource type="Resource" id="Resource_6ev6g"]
script = ExtResource("6_0a6x0")
about = "Interrogated a few relocated people working on local archaeological sites. Most of them specialize in ancient civilizations, but what is more important - their mythologies. "
difficulty = 0

[sub_resource type="Resource" id="Resource_t1mo6"]
script = ExtResource("6_0a6x0")
about = ""
difficulty = 0

[sub_resource type="Resource" id="Resource_0a6x0"]
script = ExtResource("6_0a6x0")
about = "Once again, seemingly insignificant remnants of ancient civilization. This time I need to dig deeper. I will check with the library."
difficulty = 0
metadata/_custom_type_script = "uid://bmhwp67vae4gu"

[sub_resource type="Resource" id="Resource_uee5q"]
script = ExtResource("6_0a6x0")
about = "This is where Seraku founder started his madness and begun hunt for corrupting artifacts, one for each of his most brilliant and trusted man."
difficulty = 0
metadata/_custom_type_script = "uid://bmhwp67vae4gu"

[sub_resource type="Resource" id="Resource_fj8or"]
script = ExtResource("6_0a6x0")
about = "Update after checking with the library: That civilization's mythology used to focus on eldritch being feeding on whole stars.
Great shamans gathered to cast it out from reality."
difficulty = 0
metadata/_custom_type_script = "uid://bmhwp67vae4gu"

[sub_resource type="Resource" id="Resource_dl063"]
script = ExtResource("6_0a6x0")
about = ""
difficulty = 0

[sub_resource type="Resource" id="Resource_mxsq4"]
script = ExtResource("6_0a6x0")
about = "Refueling stop between hyperspace jumps"
difficulty = 0

[sub_resource type="Resource" id="Resource_dlw72"]
script = ExtResource("6_0a6x0")
about = "Refueling stop between hyperspace jumps"
difficulty = 0

[node name="Map1" type="HBoxContainer" node_paths=PackedStringArray("active_node")]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
size_flags_vertical = 3
alignment = 1
script = ExtResource("1_yxgtb")
active_node = NodePath("0/MapNode")

[node name="ConnectSoundToParentAndAllChildren" type="Node" parent="."]
script = ExtResource("2_sau2r")

[node name="0" parent="." instance=ExtResource("2_bp67s")]
layout_mode = 2

[node name="MapNode" parent="0" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("3_s8emc")]
layout_mode = 2
next_map_nodes = [NodePath("../../Shop1/MissionShop")]
active = true

[node name="MapMargin2" parent="." instance=ExtResource("4_nrfml")]
layout_mode = 2

[node name="Shop1" parent="." instance=ExtResource("2_bp67s")]
layout_mode = 2

[node name="MissionShop" parent="Shop1" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("6_rafgn")]
layout_mode = 2
mission_info = SubResource("Resource_mqg28")
level_prefab = ExtResource("8_xfikn")
next_map_nodes = [NodePath("../../2/firstdef"), NodePath("../../2/firstrun")]

[node name="MapMargin" parent="." instance=ExtResource("4_nrfml")]
layout_mode = 2

[node name="2" parent="." instance=ExtResource("2_bp67s")]
layout_mode = 2

[node name="firstdef" parent="2" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("8_mxsq4")]
layout_mode = 2
mission_info = SubResource("Resource_pki7u")
level_prefab = ExtResource("8_uee5q")
next_map_nodes = [NodePath("../../3/secrun")]

[node name="firstrun" parent="2" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("5_rwq3m")]
layout_mode = 2
mission_info = SubResource("Resource_5jnkn")
level_prefab = ExtResource("10_mxsq4")
next_map_nodes = [NodePath("../../3/secdef")]

[node name="MapMargin4" parent="." instance=ExtResource("4_nrfml")]
layout_mode = 2

[node name="3" parent="." instance=ExtResource("2_bp67s")]
layout_mode = 2

[node name="secrun" parent="3" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("5_rwq3m")]
layout_mode = 2
mission_info = SubResource("Resource_gobyi")
level_prefab = ExtResource("11_uee5q")
next_map_nodes = [NodePath("../../Shop2/MissionShop")]

[node name="secdef" parent="3" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("8_mxsq4")]
layout_mode = 2
mission_info = SubResource("Resource_55wni")
level_prefab = ExtResource("11_dlw72")
next_map_nodes = [NodePath("../../Shop2/MissionShop")]

[node name="MapMargin6" parent="." instance=ExtResource("4_nrfml")]
layout_mode = 2

[node name="Shop2" parent="." instance=ExtResource("2_bp67s")]
layout_mode = 2

[node name="MissionShop" parent="Shop2" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("6_rafgn")]
layout_mode = 2
mission_info = SubResource("Resource_rwq3m")
level_prefab = ExtResource("8_xfikn")
next_map_nodes = [NodePath("../../5/BossNode")]

[node name="MapMargin13" parent="." instance=ExtResource("4_nrfml")]
layout_mode = 2

[node name="5" parent="." instance=ExtResource("2_bp67s")]
layout_mode = 2

[node name="BossNode" parent="5" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("6_mkmvc")]
layout_mode = 2
boss_prefabs = Array[PackedScene]([ExtResource("7_yxgtb")])
is_miniboss = true
next_map_nodes = [NodePath("../../6/MissionEscape"), NodePath("../../6/tradefuel2"), NodePath("../../6/tradedef")]

[node name="MapMargin5" parent="." instance=ExtResource("4_nrfml")]
layout_mode = 2

[node name="6" parent="." instance=ExtResource("2_bp67s")]
layout_mode = 2

[node name="tradefuel2" parent="6" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("13_rwq3m")]
layout_mode = 2
mission_info = SubResource("Resource_3cw18")
level_prefab = ExtResource("16_sau2r")
next_map_nodes = [NodePath("../../7/rockyrun")]

[node name="tradedef" parent="6" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("8_mxsq4")]
layout_mode = 2
mission_info = SubResource("Resource_bpxjr")
level_prefab = ExtResource("18_f40e2")
next_map_nodes = [NodePath("../../7/rockyfuel")]

[node name="MissionEscape" parent="6" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("5_rwq3m")]
layout_mode = 2
mission_info = SubResource("Resource_ax5eh")
level_prefab = ExtResource("10_uee5q")
next_map_nodes = [NodePath("../../7/rockydef")]

[node name="MapMargin7" parent="." instance=ExtResource("4_nrfml")]
layout_mode = 2

[node name="7" parent="." instance=ExtResource("2_bp67s")]
layout_mode = 2

[node name="rockyrun" parent="7" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("5_rwq3m")]
layout_mode = 2
mission_info = SubResource("Resource_vsw54")
level_prefab = ExtResource("20_sau2r")
next_map_nodes = [NodePath("../../8/MissionKillEnemies")]

[node name="rockyfuel" parent="7" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("13_rwq3m")]
layout_mode = 2
mission_info = SubResource("Resource_6ev6g")
level_prefab = ExtResource("21_f40e2")
next_map_nodes = [NodePath("../../8/MissionKillEnemiesSparse"), NodePath("../../8/MissionKillEnemies")]

[node name="rockydef" parent="7" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("8_mxsq4")]
layout_mode = 2
mission_info = SubResource("Resource_t1mo6")
level_prefab = ExtResource("19_dlw72")
next_map_nodes = [NodePath("../../8/MissionKillEnemiesSparse")]

[node name="MapMargin8" parent="." instance=ExtResource("4_nrfml")]
layout_mode = 2

[node name="8" parent="." instance=ExtResource("2_bp67s")]
layout_mode = 2

[node name="MissionKillEnemies" parent="8" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("30_0a6x0")]
layout_mode = 2
mission_info = SubResource("Resource_0a6x0")
next_map_nodes = [NodePath("../../9/dedicatedDefend")]

[node name="MissionKillEnemiesSparse" parent="8" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("30_0a6x0")]
layout_mode = 2
mission_info = SubResource("Resource_uee5q")
level_prefab = ExtResource("25_ax5eh")
next_map_nodes = [NodePath("../../9/dedicatedRun")]

[node name="MapMargin9" parent="." instance=ExtResource("4_nrfml")]
layout_mode = 2

[node name="9" parent="." instance=ExtResource("2_bp67s")]
layout_mode = 2

[node name="dedicatedDefend" parent="9" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("8_mxsq4")]
layout_mode = 2
mission_info = SubResource("Resource_fj8or")
level_prefab = ExtResource("23_0a6x0")
next_map_nodes = [NodePath("../../Shop3/MissionShop")]

[node name="dedicatedRun" parent="9" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("5_rwq3m")]
layout_mode = 2
mission_info = SubResource("Resource_dl063")
level_prefab = ExtResource("24_0a6x0")
next_map_nodes = [NodePath("../../Shop3/MissionShop")]

[node name="MapMargin10" parent="." instance=ExtResource("4_nrfml")]
layout_mode = 2

[node name="Shop3" parent="." instance=ExtResource("2_bp67s")]
layout_mode = 2

[node name="MissionShop" parent="Shop3" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("6_rafgn")]
layout_mode = 2
mission_info = SubResource("Resource_mxsq4")
level_prefab = ExtResource("8_xfikn")
next_map_nodes = [NodePath("../../11/BossNode")]

[node name="MapMargin11" parent="." instance=ExtResource("4_nrfml")]
layout_mode = 2

[node name="11" parent="." instance=ExtResource("2_bp67s")]
layout_mode = 2

[node name="BossNode" parent="11" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("6_mkmvc")]
layout_mode = 2
boss_prefabs = Array[PackedScene]([ExtResource("24_ui2af")])
is_miniboss = true
next_map_nodes = [NodePath("../../Shop4/MissionShop")]

[node name="MapMargin14" parent="." instance=ExtResource("4_nrfml")]
layout_mode = 2

[node name="Shop4" parent="." instance=ExtResource("2_bp67s")]
layout_mode = 2

[node name="MissionShop" parent="Shop4" node_paths=PackedStringArray("next_map_nodes") instance=ExtResource("6_rafgn")]
layout_mode = 2
mission_info = SubResource("Resource_dlw72")
level_prefab = ExtResource("8_xfikn")
next_map_nodes = [NodePath("../../13/BossNode")]

[node name="MapMargin12" parent="." instance=ExtResource("4_nrfml")]
layout_mode = 2

[node name="13" parent="." instance=ExtResource("2_bp67s")]
layout_mode = 2

[node name="BossNode" parent="13" instance=ExtResource("6_mkmvc")]
layout_mode = 2
boss_prefabs = Array[PackedScene]([ExtResource("25_bh1t4")])
